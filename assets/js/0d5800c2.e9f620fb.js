"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[679],{3670:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"px-88/software-setup/battery-notifications","title":"Battery Notifications (WIP)","description":"Set up desktop battery notifications.","source":"@site/docs/px-88/software-setup/battery-notifications.md","sourceDirName":"px-88/software-setup","slug":"/px-88/software-setup/battery-notifications","permalink":"/docs/px-88/software-setup/battery-notifications","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"Battery Notifications (WIP)","sidebar_position":8,"description":"Set up desktop battery notifications."},"sidebar":"docsSidebar","previous":{"title":"Application Launcher","permalink":"/docs/px-88/software-setup/launcher"},"next":{"title":"Typeframe PX-85","permalink":"/docs/ps-85/"}}');var r=s(4848),i=s(8453);const a={title:"Battery Notifications (WIP)",sidebar_position:8,description:"Set up desktop battery notifications."},o="Battery Notifications Setup",c={},d=[{value:"1. Copy battery status scripts from GitHub",id:"1-copy-battery-status-scripts-from-github",level:3},{value:"2. Make the scripts executable",id:"2-make-the-scripts-executable",level:3},{value:"3. Create systemd service",id:"3-create-systemd-service",level:3}];function l(e){const t={admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"battery-notifications-setup",children:"Battery Notifications Setup"})}),"\n",(0,r.jsx)(t.admonition,{title:"WIP",type:"warning",children:(0,r.jsx)(t.p,{children:"This is a work in progress; it doesn't seem to be currently working correctly."})}),"\n",(0,r.jsx)(t.p,{children:"The idea here is to have a background service that monitors the battery status from the Power Management HAT and sends desktop notifications when the battery is low."}),"\n",(0,r.jsx)(t.h3,{id:"1-copy-battery-status-scripts-from-github",children:"1. Copy battery status scripts from GitHub"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# Download battery status scripts from GitHub\ncd ~/Typeframe\nwget https://raw.githubusercontent.com/jeffmerrick/typeframe/refs/heads/main/px-88/software/battery_monitor.py\nwget https://raw.githubusercontent.com/jeffmerrick/typeframe/refs/heads/main/px-88/software/send_user_notification.sh\n"})}),"\n",(0,r.jsx)(t.h3,{id:"2-make-the-scripts-executable",children:"2. Make the scripts executable"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"chmod +x ~/Typeframe/battery_monitor.py\nchmod +x ~/Typeframe/send_user_notification.sh\n"})}),"\n",(0,r.jsx)(t.h3,{id:"3-create-systemd-service",children:"3. Create systemd service"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"sudo nano /etc/systemd/system/battery-monitor.service\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Paste the following configuration, change the username from ",(0,r.jsx)(t.code,{children:"pi"})," if necessary:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ini",children:"[Unit]\nDescription=Battery Monitor with Notifications\nAfter=graphical-session.target\nWants=graphical-session.target\n\n[Service]\nType=simple\nExecStart=/home/pi/Typeframe/battery_monitor.py\nRestart=always\nRestartSec=30\nUser=root\nEnvironment=PYTHONUNBUFFERED=1\nEnvironment=WAYLAND_DISPLAY=wayland-1\nEnvironment=XDG_RUNTIME_DIR=/run/user/1000\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# Reload systemd and enable service\nsudo systemctl daemon-reload\nsudo systemctl enable battery-monitor.service\nsudo systemctl start battery-monitor.service\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# Check service status\nsudo systemctl status battery-monitor.service\n\n# View service logs\nsudo journalctl -u battery-monitor.service -f\n\n# Test battery reading manually\nsudo python3 /home/pi/Typeframe/battery_monitor.py\n"})})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var n=s(6540);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);